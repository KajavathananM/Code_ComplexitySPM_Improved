{"ast":null,"code":"var _jsxFileName = \"E:\\\\New folder\\\\Code_Complexity_SPM\\\\Front_End\\\\src\\\\components\\\\Home\\\\LogoGatherer.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport TweenOne, { TweenOneGroup } from 'rc-tween-one';\nimport ticker from 'rc-tween-one/lib/ticker';\nimport PropTypes from 'prop-types';\n\nclass LogoGather extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onMouseEnter = () => {\n      // !this.gather && this.updateTweenData();\n      if (!this.gather) {\n        this.updateTweenData();\n      }\n\n      this.componentWillUnmount();\n    };\n\n    this.onMouseLeave = () => {\n      // this.gather && this.updateTweenData();\n      if (this.gather) {\n        this.updateTweenData();\n      }\n\n      this.interval = ticker.interval(this.updateTweenData, this.intervalTime);\n    };\n\n    this.createPointData = () => {\n      const _this$props = this.props,\n            w = _this$props.w,\n            h = _this$props.h;\n      const canvas = document.getElementById('canvas');\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, w, h);\n      canvas.width = this.props.w;\n      canvas.height = h;\n      const img = new Image();\n\n      img.onload = () => {\n        ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, w, h);\n        const data = ctx.getImageData(0, 0, w, h).data;\n        this.setDataToDom(data, w, h);\n        this.dom.removeChild(canvas);\n      };\n\n      img.crossOrigin = 'anonymous';\n      img.src = this.props.image;\n    };\n\n    this.gatherData = () => {\n      const children = this.state.children.map(item => React.cloneElement(item, {\n        animation: {\n          x: 0,\n          y: 0,\n          opacity: 1,\n          scale: 1,\n          delay: Math.random() * 300,\n          duration: 800,\n          ease: 'easeInOutQuint'\n        }\n      }));\n      this.setState({\n        children\n      });\n    };\n\n    this.disperseData = () => {\n      const rect = this.dom.getBoundingClientRect();\n      const sideRect = this.sideBox.getBoundingClientRect();\n      const sideTop = sideRect.top - rect.top;\n      const sideLeft = sideRect.left - rect.left;\n      const children = this.state.children.map(item => React.cloneElement(item, {\n        animation: {\n          x: Math.random() * rect.width - sideLeft - item.props.style.left,\n          y: Math.random() * rect.height - sideTop - item.props.style.top,\n          opacity: Math.random() * 0.4 + 0.1,\n          scale: Math.random() * 2.4 + 0.1,\n          duration: Math.random() * 500 + 500,\n          ease: 'easeInOutQuint'\n        }\n      }));\n      this.setState({\n        children\n      });\n    };\n\n    this.updateTweenData = () => {\n      this.dom = ReactDOM.findDOMNode(this);\n      this.sideBox = ReactDOM.findDOMNode(this.sideBoxComp);\n      (this.gather && this.disperseData || this.gatherData)();\n      this.gather = !this.gather;\n    };\n\n    this.state = {};\n    this.interval = null;\n    this.gather = true;\n    this.intervalTime = 9000;\n  }\n\n  componentDidMount() {\n    this.dom = ReactDOM.findDOMNode(this);\n    this.createPointData();\n  }\n\n  componentWillUnmount() {\n    ticker.clear(this.interval);\n    this.interval = null;\n  }\n\n  setDataToDom(data, w, h) {\n    this.pointArray = [];\n    const number = this.props.pixSize;\n\n    for (let i = 0; i < w; i += number) {\n      for (let j = 0; j < h; j += number) {\n        if (data[(i + j * w) * 4 + 3] > 150) {\n          this.pointArray.push({\n            x: i,\n            y: j\n          });\n        }\n      }\n    }\n\n    const children = [];\n    this.pointArray.forEach((item, i) => {\n      const r = Math.random() * this.props.pointSizeMin + this.props.pointSizeMin;\n      const b = Math.random() * 0.6 + 0.1;\n      children.push(React.createElement(TweenOne, {\n        className: \"point-wrapper\",\n        key: i,\n        style: {\n          left: item.x,\n          top: item.y\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(TweenOne, {\n        className: \"point\",\n        style: {\n          width: r,\n          height: r,\n          opacity: b,\n          backgroundColor: \"rgb(\".concat(Math.round(Math.random() * 145 + 120), \",75, 66)\")\n        },\n        animation: {\n          y: (Math.random() * 2 - 1) * 10 || 5,\n          x: (Math.random() * 2 - 1) * 5 || 2.5,\n          delay: Math.random() * 1000,\n          repeat: -1,\n          duration: 3000,\n          yoyo: true,\n          ease: 'easeInOutQuad'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      })));\n    });\n    this.setState({\n      children,\n      boxAnim: {\n        opacity: 0,\n        type: 'from',\n        duration: 800\n      }\n    }, () => {\n      this.interval = ticker.interval(this.updateTweenData, this.intervalTime);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"logo-gather-demo-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"canvas\", {\n      id: \"canvas\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"hero\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"hgroup\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"We are creative\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Because we are from \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"SLIIT\"))), React.createElement(\"button\", {\n      class: \"btn btn-hero btn-lg\",\n      role: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Visit SLIIT!!!\")), React.createElement(TweenOne, {\n      animation: this.state.boxAnim,\n      className: \"right-side blur\",\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave,\n      ref: c => {\n        this.sideBoxComp = c;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, this.state.children));\n  }\n\n}\n\nLogoGather.propTypes = {\n  image: PropTypes.string,\n  w: PropTypes.number,\n  h: PropTypes.number,\n  pixSize: PropTypes.number,\n  pointSizeMin: PropTypes.number\n};\nLogoGather.defaultProps = {\n  image: 'https://zos.alipayobjects.com/rmsportal/NbWTEbiswBhrRBU.svg',\n  w: 300,\n  h: 300,\n  pixSize: 15,\n  pointSizeMin: 10\n};\nexport default LogoGather;","map":{"version":3,"sources":["E:\\New folder\\Code_Complexity_SPM\\Front_End\\src\\components\\Home\\LogoGatherer.js"],"names":["React","Component","ReactDOM","TweenOne","TweenOneGroup","ticker","PropTypes","LogoGather","constructor","props","onMouseEnter","gather","updateTweenData","componentWillUnmount","onMouseLeave","interval","intervalTime","createPointData","w","h","canvas","document","getElementById","ctx","getContext","clearRect","width","height","img","Image","onload","drawImage","data","getImageData","setDataToDom","dom","removeChild","crossOrigin","src","image","gatherData","children","state","map","item","cloneElement","animation","x","y","opacity","scale","delay","Math","random","duration","ease","setState","disperseData","rect","getBoundingClientRect","sideRect","sideBox","sideTop","top","sideLeft","left","style","findDOMNode","sideBoxComp","componentDidMount","clear","pointArray","number","pixSize","i","j","push","forEach","r","pointSizeMin","b","backgroundColor","round","repeat","yoyo","boxAnim","type","render","c","propTypes","string","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport TweenOne, { TweenOneGroup } from 'rc-tween-one';\r\nimport ticker from 'rc-tween-one/lib/ticker';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nclass LogoGather extends React.Component {\r\n  static propTypes = {\r\n    image: PropTypes.string,\r\n    w: PropTypes.number,\r\n    h: PropTypes.number,\r\n    pixSize: PropTypes.number,\r\n    pointSizeMin: PropTypes.number,\r\n  };\r\n\r\n  static defaultProps = {\r\n    image: 'https://zos.alipayobjects.com/rmsportal/NbWTEbiswBhrRBU.svg',\r\n    w: 300,\r\n    h: 300,\r\n    pixSize: 15,\r\n    pointSizeMin: 10,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.interval = null;\r\n    this.gather = true;\r\n    this.intervalTime = 9000;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.dom = ReactDOM.findDOMNode(this);\r\n    this.createPointData();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    ticker.clear(this.interval);\r\n    this.interval = null;\r\n  }\r\n\r\n  onMouseEnter = () => {\r\n    // !this.gather && this.updateTweenData();\r\n    if (!this.gather) {\r\n      this.updateTweenData();\r\n    }\r\n    this.componentWillUnmount();\r\n  };\r\n\r\n  onMouseLeave = () => {\r\n    // this.gather && this.updateTweenData();\r\n    if (this.gather) {\r\n      this.updateTweenData();\r\n    }\r\n    this.interval = ticker.interval(this.updateTweenData, this.intervalTime);\r\n  };\r\n\r\n  setDataToDom(data, w, h) {\r\n    this.pointArray = [];\r\n    const number = this.props.pixSize;\r\n    for (let i = 0; i < w; i += number) {\r\n      for (let j = 0; j < h; j += number) {\r\n        if (data[((i + j * w) * 4) + 3] > 150) {\r\n          this.pointArray.push({ x: i, y: j });\r\n        }\r\n      }\r\n    }\r\n    const children = [];\r\n    this.pointArray.forEach((item, i) => {\r\n      const r = Math.random() * this.props.pointSizeMin + this.props.pointSizeMin;\r\n      const b = Math.random() * 0.6 + 0.1;\r\n      children.push((\r\n        <TweenOne className=\"point-wrapper\" key={i} style={{ left: item.x, top: item.y }}>\r\n          <TweenOne\r\n            className=\"point\"\r\n            style={{\r\n              width: r,\r\n              height: r,\r\n              opacity: b,\r\n              backgroundColor: `rgb(${Math.round(Math.random() * 145 + 120)},75, 66)`,\r\n            }}\r\n            animation={{\r\n              y: (Math.random() * 2 - 1) * 10 || 5,\r\n              x: (Math.random() * 2 - 1) * 5 || 2.5,\r\n              delay: Math.random() * 1000,\r\n              repeat: -1,\r\n              duration: 3000,\r\n              yoyo: true,\r\n              ease: 'easeInOutQuad',\r\n            }}\r\n          />\r\n        </TweenOne>\r\n      ));\r\n    });\r\n    this.setState({\r\n      children,\r\n      boxAnim: { opacity: 0, type: 'from', duration: 800 },\r\n    }, () => {\r\n      this.interval = ticker.interval(this.updateTweenData, this.intervalTime);\r\n    });\r\n  }\r\n\r\n  createPointData = () => {\r\n    const { w, h } = this.props;\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.clearRect(0, 0, w, h);\r\n    canvas.width = this.props.w;\r\n    canvas.height = h;\r\n    const img = new Image();\r\n    img.onload = () => {\r\n      ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, w, h);\r\n      const data = ctx.getImageData(0, 0, w, h).data;\r\n      this.setDataToDom(data, w, h);\r\n      this.dom.removeChild(canvas);\r\n    };\r\n    img.crossOrigin = 'anonymous';\r\n    img.src = this.props.image;\r\n  };\r\n\r\n  gatherData = () => {\r\n    const children = this.state.children.map(item =>\r\n      React.cloneElement(item, {\r\n        animation: {\r\n          x: 0,\r\n          y: 0,\r\n          opacity: 1,\r\n          scale: 1,\r\n          delay: Math.random() * 300,\r\n          duration: 800,\r\n          ease: 'easeInOutQuint',\r\n        },\r\n      }));\r\n    this.setState({ children });\r\n  };\r\n\r\n  disperseData = () => {\r\n    const rect = this.dom.getBoundingClientRect();\r\n    const sideRect = this.sideBox.getBoundingClientRect();\r\n    const sideTop = sideRect.top - rect.top;\r\n    const sideLeft = sideRect.left - rect.left;\r\n    const children = this.state.children.map(item =>\r\n      React.cloneElement(item, {\r\n        animation: {\r\n          x: Math.random() * rect.width - sideLeft - item.props.style.left,\r\n          y: Math.random() * rect.height - sideTop - item.props.style.top,\r\n          opacity: Math.random() * 0.4 + 0.1,\r\n          scale: Math.random() * 2.4 + 0.1,\r\n          duration: Math.random() * 500 + 500,\r\n          ease: 'easeInOutQuint',\r\n        },\r\n      }));\r\n\r\n    this.setState({\r\n      children,\r\n    });\r\n  };\r\n\r\n  updateTweenData = () => {\r\n    this.dom = ReactDOM.findDOMNode(this);\r\n    this.sideBox = ReactDOM.findDOMNode(this.sideBoxComp);\r\n    ((this.gather && this.disperseData) || this.gatherData)();\r\n    this.gather = !this.gather;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"logo-gather-demo-wrapper\">\r\n        <canvas id=\"canvas\" />\r\n        <div class=\"hero\">\r\n          <hgroup>\r\n            <h1 className=\"text-danger\">We are creative</h1>\r\n            <h3 >Because we are from <b>SLIIT</b></h3>\r\n          </hgroup>\r\n          <button class=\"btn btn-hero btn-lg\" role=\"button\">Visit SLIIT!!!</button>\r\n        </div>\r\n        <TweenOne\r\n          animation={this.state.boxAnim}\r\n          className=\"right-side blur\"\r\n          onMouseEnter={this.onMouseEnter}\r\n          onMouseLeave={this.onMouseLeave}\r\n          ref={(c) => {\r\n            this.sideBoxComp = c;\r\n          }}\r\n        >\r\n          {this.state.children}\r\n        </TweenOne>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LogoGather;"]},"metadata":{},"sourceType":"module"}