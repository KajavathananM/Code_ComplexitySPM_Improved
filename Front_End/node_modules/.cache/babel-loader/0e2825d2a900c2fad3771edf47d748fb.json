{"ast":null,"code":"var _jsxFileName = \"E:\\\\New folder\\\\Code_Complexity_SPM\\\\Front_End\\\\src\\\\components\\\\Data_Visualization\\\\Pie_Dragable.js\";\nimport React, { Component } from 'react';\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\nam4core.useTheme(am4themes_animated);\n\nclass Pie_Dragable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      Cs: props.Cs,\n      Cr: props.Cr,\n      Ctc: props.Ctc,\n      Cnc: props.Cnc,\n      Ci: props.Ci\n    };\n  }\n\n  componentDidMount() {\n    let data = [{\n      \"category\": \"Dummy\",\n      \"disabled\": true,\n      \"complexity\": 1000,\n      \"color\": am4core.color(\"#dadada\"),\n      \"opacity\": 0.3,\n      \"strokeDasharray\": \"4,4\"\n    }, {\n      \"category\": \"Complexity_By_Inheritence\",\n      \"complexity\": this.state.Ci.reduce((a, b) => a + b, 0)\n    }, {\n      \"category\": \"Complexity_By_Size\",\n      \"complexity\": this.state.Cs.slice(0, this.state.Cs.length).reduce((a, b) => a + b, 0)\n    }, {\n      \"category\": \"Complexity_By_Recursion\",\n      \"complexity\": this.state.Cr.slice(0, this.state.Cr.length).reduce((a, b) => a + b, 0)\n    }, {\n      \"category\": \"Complexity_By_Nested\",\n      \"complexity\": this.state.Cnc.reduce((a, b) => a + b, 0)\n    }, {\n      \"category\": \"Complexity_By_Type\",\n      \"complexity\": this.state.Ctc.reduce((a, b) => a + b, 0)\n    }]; // cointainer to hold both charts\n\n    let container = am4core.create(\"chartdiv2\", am4core.Container);\n    container.width = am4core.percent(100);\n    container.height = am4core.percent(100);\n    container.layout = \"horizontal\";\n    container.events.on(\"maxsizechanged\", function () {\n      chart1.zIndex = 0;\n      separatorLine.zIndex = 1;\n      dragText.zIndex = 2;\n      chart2.zIndex = 3;\n    });\n    let chart1 = container.createChild(am4charts.PieChart);\n    chart1.fontSize = 11;\n    chart1.hiddenState.properties.opacity = 0; // this makes initial fade in effect\n\n    chart1.data = data;\n    chart1.radius = am4core.percent(70);\n    chart1.innerRadius = am4core.percent(40);\n    chart1.zIndex = 1;\n    let series1 = chart1.series.push(new am4charts.PieSeries());\n    series1.dataFields.value = \"complexity\";\n    series1.dataFields.category = \"category\";\n    series1.colors.step = 2;\n    series1.alignLabels = false;\n    series1.labels.template.bent = true;\n    series1.labels.template.radius = 3;\n    series1.labels.template.padding(0, 0, 0, 0);\n    let sliceTemplate1 = series1.slices.template;\n    sliceTemplate1.cornerRadius = 5;\n    sliceTemplate1.draggable = true;\n    sliceTemplate1.inert = true;\n    sliceTemplate1.propertyFields.fill = \"color\";\n    sliceTemplate1.propertyFields.fillOpacity = \"opacity\";\n    sliceTemplate1.propertyFields.stroke = \"color\";\n    sliceTemplate1.propertyFields.strokeDasharray = \"strokeDasharray\";\n    sliceTemplate1.strokeWidth = 1;\n    sliceTemplate1.strokeOpacity = 1;\n    let zIndex = 5;\n    sliceTemplate1.events.on(\"down\", function (event) {\n      event.target.toFront(); // also put chart to front\n\n      let series = event.target.dataItem.component;\n      series.chart.zIndex = zIndex++;\n    });\n    series1.ticks.template.disabled = true;\n    sliceTemplate1.states.getKey(\"active\").properties.shiftRadius = 0;\n    sliceTemplate1.events.on(\"dragstop\", function (event) {\n      handleDragStop(event);\n    }); // separator line and text\n\n    let separatorLine = container.createChild(am4core.Line);\n    separatorLine.x1 = 0;\n    separatorLine.y2 = 300;\n    separatorLine.strokeWidth = 3;\n    separatorLine.stroke = am4core.color(\"#dadada\");\n    separatorLine.valign = \"middle\";\n    separatorLine.strokeDasharray = \"5,5\";\n    let dragText = container.createChild(am4core.Label);\n    dragText.text = \"Drag slices over the line\";\n    dragText.rotation = 90;\n    dragText.valign = \"middle\";\n    dragText.align = \"center\";\n    dragText.paddingBottom = 5; // second chart\n\n    let chart2 = container.createChild(am4charts.PieChart);\n    chart2.hiddenState.properties.opacity = 0; // this makes initial fade in effect\n\n    chart2.fontSize = 11;\n    chart2.radius = am4core.percent(70);\n    chart2.data = data;\n    chart2.innerRadius = am4core.percent(40);\n    chart2.zIndex = 1;\n    let series2 = chart2.series.push(new am4charts.PieSeries());\n    series2.dataFields.value = \"complexity\";\n    series2.dataFields.category = \"category\";\n    series2.colors.step = 2;\n    series2.alignLabels = false;\n    series2.labels.template.bent = true;\n    series2.labels.template.radius = 3;\n    series2.labels.template.padding(0, 0, 0, 0);\n    series2.labels.template.propertyFields.disabled = \"disabled\";\n    let sliceTemplate2 = series2.slices.template;\n    sliceTemplate2.copyFrom(sliceTemplate1);\n    series2.ticks.template.disabled = true;\n\n    function handleDragStop(event) {\n      let targetSlice = event.target;\n      let dataItem1;\n      let dataItem2;\n      let slice1;\n      let slice2;\n\n      if (series1.slices.indexOf(targetSlice) != -1) {\n        slice1 = targetSlice;\n        slice2 = series2.dataItems.getIndex(targetSlice.dataItem.index).slice;\n      } else if (series2.slices.indexOf(targetSlice) != -1) {\n        slice1 = series1.dataItems.getIndex(targetSlice.dataItem.index).slice;\n        slice2 = targetSlice;\n      }\n\n      dataItem1 = slice1.dataItem;\n      dataItem2 = slice2.dataItem;\n      let series1Center = am4core.utils.spritePointToSvg({\n        x: 0,\n        y: 0\n      }, series1.slicesContainer);\n      let series2Center = am4core.utils.spritePointToSvg({\n        x: 0,\n        y: 0\n      }, series2.slicesContainer);\n      let series1CenterConverted = am4core.utils.svgPointToSprite(series1Center, series2.slicesContainer);\n      let series2CenterConverted = am4core.utils.svgPointToSprite(series2Center, series1.slicesContainer); // tooltipY and tooltipY are in the middle of the slice, so we use them to avoid extra calculations\n\n      let targetSlicePoint = am4core.utils.spritePointToSvg({\n        x: targetSlice.tooltipX,\n        y: targetSlice.tooltipY\n      }, targetSlice);\n\n      if (targetSlice == slice1) {\n        if (targetSlicePoint.x > container.pixelWidth / 2) {\n          let value = dataItem1.value;\n          dataItem1.hide();\n          let animation = slice1.animate([{\n            property: \"x\",\n            to: series2CenterConverted.x\n          }, {\n            property: \"y\",\n            to: series2CenterConverted.y\n          }], 400);\n          animation.events.on(\"animationprogress\", function (event) {\n            slice1.hideTooltip();\n          });\n          slice2.x = 0;\n          slice2.y = 0;\n          dataItem2.show();\n        } else {\n          slice1.animate([{\n            property: \"x\",\n            to: 0\n          }, {\n            property: \"y\",\n            to: 0\n          }], 400);\n        }\n      }\n\n      if (targetSlice == slice2) {\n        if (targetSlicePoint.x < container.pixelWidth / 2) {\n          let value = dataItem2.value;\n          dataItem2.hide();\n          let animation = slice2.animate([{\n            property: \"x\",\n            to: series1CenterConverted.x\n          }, {\n            property: \"y\",\n            to: series1CenterConverted.y\n          }], 400);\n          animation.events.on(\"animationprogress\", function (event) {\n            slice2.hideTooltip();\n          });\n          slice1.x = 0;\n          slice1.y = 0;\n          dataItem1.show();\n        } else {\n          slice2.animate([{\n            property: \"x\",\n            to: 0\n          }, {\n            property: \"y\",\n            to: 0\n          }], 400);\n        }\n      }\n\n      toggleDummySlice(series1);\n      toggleDummySlice(series2);\n      series1.hideTooltip();\n      series2.hideTooltip();\n    }\n\n    function toggleDummySlice(series) {\n      let show = true;\n\n      for (var i = 1; i < series.dataItems.length; i++) {\n        let dataItem = series.dataItems.getIndex(i);\n\n        if (dataItem.slice.visible && !dataItem.slice.isHiding) {\n          show = false;\n        }\n      }\n\n      let dummySlice = series.dataItems.getIndex(0);\n\n      if (show) {\n        dummySlice.show();\n      } else {\n        dummySlice.hide();\n      }\n    }\n\n    series2.events.on(\"datavalidated\", function () {\n      let dummyDataItem = series2.dataItems.getIndex(0);\n      dummyDataItem.show(0);\n      dummyDataItem.slice.draggable = false;\n      dummyDataItem.slice.tooltipText = undefined;\n\n      for (var i = 1; i < series2.dataItems.length; i++) {\n        series2.dataItems.getIndex(i).hide(0);\n      }\n    });\n    series1.events.on(\"datavalidated\", function () {\n      let dummyDataItem = series1.dataItems.getIndex(0);\n      dummyDataItem.hide(0);\n      dummyDataItem.slice.draggable = false;\n      dummyDataItem.slice.tooltipText = undefined;\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.chart) {\n      this.chart.dispose();\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"chartdiv2\",\n      style: {\n        width: \"100%\",\n        height: \"500px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Pie_Dragable;","map":{"version":3,"sources":["E:\\New folder\\Code_Complexity_SPM\\Front_End\\src\\components\\Data_Visualization\\Pie_Dragable.js"],"names":["React","Component","am4core","am4charts","am4themes_animated","useTheme","Pie_Dragable","constructor","props","state","Cs","Cr","Ctc","Cnc","Ci","componentDidMount","data","color","reduce","a","b","slice","length","container","create","Container","width","percent","height","layout","events","on","chart1","zIndex","separatorLine","dragText","chart2","createChild","PieChart","fontSize","hiddenState","properties","opacity","radius","innerRadius","series1","series","push","PieSeries","dataFields","value","category","colors","step","alignLabels","labels","template","bent","padding","sliceTemplate1","slices","cornerRadius","draggable","inert","propertyFields","fill","fillOpacity","stroke","strokeDasharray","strokeWidth","strokeOpacity","event","target","toFront","dataItem","component","chart","ticks","disabled","states","getKey","shiftRadius","handleDragStop","Line","x1","y2","valign","Label","text","rotation","align","paddingBottom","series2","sliceTemplate2","copyFrom","targetSlice","dataItem1","dataItem2","slice1","slice2","indexOf","dataItems","getIndex","index","series1Center","utils","spritePointToSvg","x","y","slicesContainer","series2Center","series1CenterConverted","svgPointToSprite","series2CenterConverted","targetSlicePoint","tooltipX","tooltipY","pixelWidth","hide","animation","animate","property","to","hideTooltip","show","toggleDummySlice","i","visible","isHiding","dummySlice","dummyDataItem","tooltipText","undefined","componentWillUnmount","dispose","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport * as am4core from \"@amcharts/amcharts4/core\";\r\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\r\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\r\n\r\nam4core.useTheme(am4themes_animated);\r\n\r\nclass Pie_Dragable extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            Cs: props.Cs,\r\n            Cr:props.Cr,\r\n            Ctc: props.Ctc,\r\n            Cnc: props.Cnc,\r\n            Ci: props.Ci\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        let data = [{\r\n            \"category\": \"Dummy\",\r\n            \"disabled\": true,\r\n            \"complexity\": 1000,\r\n            \"color\": am4core.color(\"#dadada\"),\r\n            \"opacity\": 0.3,\r\n            \"strokeDasharray\": \"4,4\"\r\n        }, {\r\n            \"category\": \"Complexity_By_Inheritence\",\r\n            \"complexity\": this.state.Ci.reduce((a, b) => a + b, 0)\r\n        }, {\r\n            \"category\": \"Complexity_By_Size\",\r\n            \"complexity\": this.state.Cs.slice(0,this.state.Cs.length).reduce((a, b) => a + b, 0)\r\n        }, {\r\n            \"category\": \"Complexity_By_Recursion\",\r\n            \"complexity\": this.state.Cr.slice(0,this.state.Cr.length).reduce((a, b) => a + b, 0)\r\n        }, {\r\n            \"category\": \"Complexity_By_Nested\",\r\n            \"complexity\": this.state.Cnc.reduce((a, b) => a + b, 0)\r\n        }, {\r\n            \"category\": \"Complexity_By_Type\",\r\n            \"complexity\": this.state.Ctc.reduce((a, b) => a + b, 0)\r\n        }];\r\n\r\n\r\n        // cointainer to hold both charts\r\n        let container = am4core.create(\"chartdiv2\", am4core.Container);\r\n        container.width = am4core.percent(100);\r\n        container.height = am4core.percent(100);\r\n        container.layout = \"horizontal\";\r\n\r\n        container.events.on(\"maxsizechanged\", function () {\r\n            chart1.zIndex = 0;\r\n            separatorLine.zIndex = 1;\r\n            dragText.zIndex = 2;\r\n            chart2.zIndex = 3;\r\n        })\r\n\r\n        let chart1 = container.createChild(am4charts.PieChart);\r\n        chart1.fontSize = 11;\r\n        chart1.hiddenState.properties.opacity = 0; // this makes initial fade in effect\r\n        chart1.data = data;\r\n        chart1.radius = am4core.percent(70);\r\n        chart1.innerRadius = am4core.percent(40);\r\n        chart1.zIndex = 1;\r\n\r\n        let series1 = chart1.series.push(new am4charts.PieSeries());\r\n        series1.dataFields.value = \"complexity\";\r\n        series1.dataFields.category = \"category\";\r\n        series1.colors.step = 2;\r\n        series1.alignLabels = false;\r\n        series1.labels.template.bent = true;\r\n        series1.labels.template.radius = 3;\r\n        series1.labels.template.padding(0, 0, 0, 0);\r\n\r\n        let sliceTemplate1 = series1.slices.template;\r\n        sliceTemplate1.cornerRadius = 5;\r\n        sliceTemplate1.draggable = true;\r\n        sliceTemplate1.inert = true;\r\n        sliceTemplate1.propertyFields.fill = \"color\";\r\n        sliceTemplate1.propertyFields.fillOpacity = \"opacity\";\r\n        sliceTemplate1.propertyFields.stroke = \"color\";\r\n        sliceTemplate1.propertyFields.strokeDasharray = \"strokeDasharray\";\r\n        sliceTemplate1.strokeWidth = 1;\r\n        sliceTemplate1.strokeOpacity = 1;\r\n\r\n        let zIndex = 5;\r\n\r\n        sliceTemplate1.events.on(\"down\", function (event) {\r\n            event.target.toFront();\r\n            // also put chart to front\r\n            let series = event.target.dataItem.component;\r\n            series.chart.zIndex = zIndex++;\r\n        })\r\n\r\n        series1.ticks.template.disabled = true;\r\n\r\n        sliceTemplate1.states.getKey(\"active\").properties.shiftRadius = 0;\r\n\r\n        sliceTemplate1.events.on(\"dragstop\", function (event) {\r\n            handleDragStop(event);\r\n        })\r\n\r\n        // separator line and text\r\n        let separatorLine = container.createChild(am4core.Line);\r\n        separatorLine.x1 = 0;\r\n        separatorLine.y2 = 300;\r\n        separatorLine.strokeWidth = 3;\r\n        separatorLine.stroke = am4core.color(\"#dadada\");\r\n        separatorLine.valign = \"middle\";\r\n        separatorLine.strokeDasharray = \"5,5\";\r\n\r\n\r\n        let dragText = container.createChild(am4core.Label);\r\n        dragText.text = \"Drag slices over the line\";\r\n        dragText.rotation = 90;\r\n        dragText.valign = \"middle\";\r\n        dragText.align = \"center\";\r\n        dragText.paddingBottom = 5;\r\n\r\n        // second chart\r\n        let chart2 = container.createChild(am4charts.PieChart);\r\n        chart2.hiddenState.properties.opacity = 0; // this makes initial fade in effect\r\n        chart2.fontSize = 11;\r\n        chart2.radius = am4core.percent(70);\r\n        chart2.data = data;\r\n        chart2.innerRadius = am4core.percent(40);\r\n        chart2.zIndex = 1;\r\n\r\n        let series2 = chart2.series.push(new am4charts.PieSeries());\r\n        series2.dataFields.value = \"complexity\";\r\n        series2.dataFields.category = \"category\";\r\n        series2.colors.step = 2;\r\n\r\n        series2.alignLabels = false;\r\n        series2.labels.template.bent = true;\r\n        series2.labels.template.radius = 3;\r\n        series2.labels.template.padding(0, 0, 0, 0);\r\n        series2.labels.template.propertyFields.disabled = \"disabled\";\r\n\r\n        let sliceTemplate2 = series2.slices.template;\r\n        sliceTemplate2.copyFrom(sliceTemplate1);\r\n\r\n        series2.ticks.template.disabled = true;\r\n\r\n        function handleDragStop(event) {\r\n            let targetSlice = event.target;\r\n            let dataItem1;\r\n            let dataItem2;\r\n            let slice1;\r\n            let slice2;\r\n\r\n            if (series1.slices.indexOf(targetSlice) != -1) {\r\n                slice1 = targetSlice;\r\n                slice2 = series2.dataItems.getIndex(targetSlice.dataItem.index).slice;\r\n            }\r\n            else if (series2.slices.indexOf(targetSlice) != -1) {\r\n                slice1 = series1.dataItems.getIndex(targetSlice.dataItem.index).slice;\r\n                slice2 = targetSlice;\r\n            }\r\n\r\n\r\n            dataItem1 = slice1.dataItem;\r\n            dataItem2 = slice2.dataItem;\r\n\r\n            let series1Center = am4core.utils.spritePointToSvg({ x: 0, y: 0 }, series1.slicesContainer);\r\n            let series2Center = am4core.utils.spritePointToSvg({ x: 0, y: 0 }, series2.slicesContainer);\r\n\r\n            let series1CenterConverted = am4core.utils.svgPointToSprite(series1Center, series2.slicesContainer);\r\n            let series2CenterConverted = am4core.utils.svgPointToSprite(series2Center, series1.slicesContainer);\r\n\r\n            // tooltipY and tooltipY are in the middle of the slice, so we use them to avoid extra calculations\r\n            let targetSlicePoint = am4core.utils.spritePointToSvg({ x: targetSlice.tooltipX, y: targetSlice.tooltipY }, targetSlice);\r\n\r\n            if (targetSlice == slice1) {\r\n                if (targetSlicePoint.x > container.pixelWidth / 2) {\r\n                    let value = dataItem1.value;\r\n\r\n                    dataItem1.hide();\r\n\r\n                    let animation = slice1.animate([{ property: \"x\", to: series2CenterConverted.x }, { property: \"y\", to: series2CenterConverted.y }], 400);\r\n                    animation.events.on(\"animationprogress\", function (event) {\r\n                        slice1.hideTooltip();\r\n                    })\r\n\r\n                    slice2.x = 0;\r\n                    slice2.y = 0;\r\n\r\n                    dataItem2.show();\r\n                }\r\n                else {\r\n                    slice1.animate([{ property: \"x\", to: 0 }, { property: \"y\", to: 0 }], 400);\r\n                }\r\n            }\r\n            if (targetSlice == slice2) {\r\n                if (targetSlicePoint.x < container.pixelWidth / 2) {\r\n\r\n                    let value = dataItem2.value;\r\n\r\n                    dataItem2.hide();\r\n\r\n                    let animation = slice2.animate([{ property: \"x\", to: series1CenterConverted.x }, { property: \"y\", to: series1CenterConverted.y }], 400);\r\n                    animation.events.on(\"animationprogress\", function (event) {\r\n                        slice2.hideTooltip();\r\n                    })\r\n\r\n                    slice1.x = 0;\r\n                    slice1.y = 0;\r\n                    dataItem1.show();\r\n                }\r\n                else {\r\n                    slice2.animate([{ property: \"x\", to: 0 }, { property: \"y\", to: 0 }], 400);\r\n                }\r\n            }\r\n\r\n            toggleDummySlice(series1);\r\n            toggleDummySlice(series2);\r\n\r\n            series1.hideTooltip();\r\n            series2.hideTooltip();\r\n        }\r\n\r\n        function toggleDummySlice(series) {\r\n            let show = true;\r\n            for (var i = 1; i < series.dataItems.length; i++) {\r\n                let dataItem = series.dataItems.getIndex(i);\r\n                if (dataItem.slice.visible && !dataItem.slice.isHiding) {\r\n                    show = false;\r\n                }\r\n            }\r\n\r\n            let dummySlice = series.dataItems.getIndex(0);\r\n            if (show) {\r\n                dummySlice.show();\r\n            }\r\n            else {\r\n                dummySlice.hide();\r\n            }\r\n        }\r\n\r\n        series2.events.on(\"datavalidated\", function () {\r\n\r\n            let dummyDataItem = series2.dataItems.getIndex(0);\r\n            dummyDataItem.show(0);\r\n            dummyDataItem.slice.draggable = false;\r\n            dummyDataItem.slice.tooltipText = undefined;\r\n\r\n            for (var i = 1; i < series2.dataItems.length; i++) {\r\n                series2.dataItems.getIndex(i).hide(0);\r\n            }\r\n        })\r\n\r\n        series1.events.on(\"datavalidated\", function () {\r\n            let dummyDataItem = series1.dataItems.getIndex(0);\r\n            dummyDataItem.hide(0);\r\n            dummyDataItem.slice.draggable = false;\r\n            dummyDataItem.slice.tooltipText = undefined;\r\n        })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.chart) {\r\n            this.chart.dispose();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"chartdiv2\" style={{ width: \"100%\", height: \"500px\" }}></div>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Pie_Dragable;"]},"metadata":{},"sourceType":"module"}